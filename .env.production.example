# GadgetBot Production Environment Variables
# For use with Coolify deployment
#
# Usage: Copy values to Coolify's Environment Variables section
# Location: Coolify → gadgetbot-app → Configuration → Environment Variables
#
# ⚠️ DO NOT commit actual .env.production file with real secrets

# ====================================
# Database Configuration
# ====================================
# Get connection string from Coolify's PostgreSQL resource (gadgetbot-db)
# ⚠️ CRITICAL: Must use postgresql:// protocol (not postgres://)
# Coolify provides postgres:// but app requires postgresql://
DATABASE_URL=postgresql://postgres:CHANGE_ME_PASSWORD@internal-host:5432/gadgetbot

# Connection pool settings (parsed as numbers from string values)
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ====================================
# Application URLs
# ====================================
# Your production domain (configured in Coolify with https:// prefix)
APP_URL=https://gadgetbot.vellandi.net
BETTER_AUTH_URL=https://gadgetbot.vellandi.net

# ====================================
# Better Auth Configuration
# ====================================
# Session encryption secret - generate with: openssl rand -base64 32
# Must be at least 32 characters
BETTER_AUTH_SECRET=CHANGE_ME_GENERATE_WITH_OPENSSL_RAND_BASE64_32

# ====================================
# Zitadel OAuth Configuration
# ====================================
# Zitadel instance URL (managed by Coolify as separate service)
ZITADEL_ISSUER_URL=https://gadgetbot-auth.vellandi.net

# OAuth application credentials (obtain after Phase 3)
# Get from: Zitadel Console → Projects → GadgetBot → Applications
ZITADEL_CLIENT_ID=CHANGE_ME_FROM_ZITADEL_CONSOLE

# Note: ZITADEL_CLIENT_SECRET not needed - using PKCE flow

# ====================================
# Optional: Client-side Variables
# ====================================
# These are embedded into JavaScript bundle at build time
# Only set these if you need to override defaults
# VITE_APP_TITLE=GadgetBot
# VITE_SERVER_URL=https://gadgetbot.vellandi.net

# ====================================
# Coolify Configuration Tips
# ====================================
#
# "Available at Runtime" checkbox:
# - ✅ Check for: DATABASE_URL, BETTER_AUTH_SECRET, APP_URL, etc.
# - ℹ️ Makes variable available when container runs
#
# "Available at Buildtime" checkbox:
# - ✅ Check ONLY for: VITE_* variables (if using them)
# - ⬜ Uncheck for: All other variables
# - ⚠️ Checking this for NODE_ENV breaks build (skips devDependencies)
# - ℹ️ Dockerfile already sets NODE_ENV=production
#
# Environment Variable Types:
# - Strings: DATABASE_URL, BETTER_AUTH_SECRET, etc.
# - Numbers: DATABASE_POOL_MIN, DATABASE_POOL_MAX (parsed via NumberFromString)
# - All env vars are strings by default, app parses them as needed
#
# Security Notes:
# - Never commit real secrets to git
# - Use Coolify's UI to set actual values
# - Rotate BETTER_AUTH_SECRET if exposed
# - DATABASE_URL contains password - keep secure
