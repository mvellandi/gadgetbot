# Zitadel Configuration

This directory contains all Zitadel-related configuration files for the GadgetBot authentication system.

## Files

### Docker Compose Files

- **`docker-compose.local.yml`** - Local development setup
  - 3-container setup: Zitadel + Login V2 + PostgreSQL
  - Used by: `npm run zitadel:up`
  - Default admin: `admin@gadgetbot.localhost` / `Admin123!`

- **`docker-compose.production.yml`** - Production deployment
  - Same 3-container setup for production
  - Configure external domain and SSL settings
  - See: [docs/DEPLOYMENT_PLAN_2025-11-03.md](../docs/DEPLOYMENT_PLAN_2025-11-03.md)

- **`docker-compose.official.yml`** - Reference implementation
  - Official Zitadel 3-container setup example
  - Use as reference for custom configurations

### Configuration Files

- **`config.yaml`** - Zitadel runtime configuration (if needed)
  - Custom Zitadel settings
  - Override environment variables

- **`export.json`** - Latest Zitadel configuration export
  - Projects, applications, roles, grants
  - Safe to commit (contains no secrets)
  - Generated by: `npm run zitadel:export`
  - Imported by: `npm run zitadel:import`

## Usage

### Local Development

```bash
# Start Zitadel
npm run zitadel:up

# View logs
npm run zitadel:logs

# Stop Zitadel
npm run zitadel:down

# Reset (delete data and restart)
npm run zitadel:reset
```

### Configuration Management

```bash
# Export current config
npm run zitadel:export

# Export to custom path
npm run zitadel:export -- --output=backups/zitadel-backup.json

# Import config
npm run zitadel:import

# Import from custom path (dry run first)
npm run zitadel:import -- --input=backups/zitadel-backup.json --dry-run
npm run zitadel:import -- --input=backups/zitadel-backup.json
```

## Documentation

- [ZITADEL_MIGRATION.md](../docs/ZITADEL_MIGRATION.md) - Import/export guide
- [AUTH_SETUP.md](../docs/AUTH_SETUP.md) - Authentication setup
- [DEPLOYMENT_PLAN_2025-11-03.md](../docs/DEPLOYMENT_PLAN_2025-11-03.md) - Production deployment

## Security Notes

- ‚úÖ **Safe to commit**: `export.json`, docker-compose files
- ‚ùå **Never commit**: Service tokens, PATs, client secrets
- üîê **Secrets management**: Use environment variables or Coolify UI

For complete security guidelines, see [docs/ZITADEL_MIGRATION.md - Security Notes](../docs/ZITADEL_MIGRATION.md#security-notes)
